<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–∑–µ—Ä–µ - FishGuide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .text-gradient { background: linear-gradient(135deg, #f97316, #ea580c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .weather-card { transition: all 0.3s ease; }
        .weather-card:hover { transform: translateY(-2px); }
        .bite-excellent { background: linear-gradient(135deg, #10b981, #059669); }
        .bite-good { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .bite-poor { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .loading { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white/90 backdrop-blur-md z-50 border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <div class="text-2xl">üêü</div>
                    <span class="text-xl font-bold text-gradient">FishGuide</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="text-slate-600 hover:text-blue-600 transition-colors">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="lakes.html" class="text-slate-600 hover:text-blue-600 transition-colors">–ö–∞—Ç–∞–ª–æ–≥ –æ–∑–µ—Ä</a>
                    <a href="tackle-calculator.html" class="text-slate-600 hover:text-blue-600 transition-colors">–ü–æ–¥–æ–±—Ä–∞—Ç—å —Å–Ω–∞—Å—Ç–∏</a>
                    <a href="fish-guide.html" class="text-slate-600 hover:text-blue-600 transition-colors">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä—ã–±</a>
                </div>
                <button class="md:hidden p-2" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed top-16 left-0 w-full bg-white border-b border-slate-200 z-40 hidden">
        <div class="px-4 py-4 space-y-2">
            <a href="index.html" class="block py-2 text-slate-600">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="lakes.html" class="block py-2 text-slate-600">–ö–∞—Ç–∞–ª–æ–≥ –æ–∑–µ—Ä</a>
            <a href="tackle-calculator.html" class="block py-2 text-slate-600">–ü–æ–¥–æ–±—Ä–∞—Ç—å —Å–Ω–∞—Å—Ç–∏</a>
            <a href="fish-guide.html" class="block py-2 text-slate-600">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä—ã–±</a>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loading-state" class="fixed inset-0 bg-white/80 backdrop-blur-sm z-40 flex items-center justify-center">
        <div class="text-center">
            <div class="loading w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"></div>
            <p class="text-slate-600">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–∑–µ—Ä–µ...</p>
        </div>
    </div>

    <!-- Lake Header -->
    <section class="pt-24 pb-8 bg-gradient-to-br from-blue-600 to-blue-800">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center mb-4">
                <a href="lakes.html" class="text-white/80 hover:text-white transition-colors flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–∞–ª–æ–≥—É
                </a>
            </div>
            
            <div class="text-white">
                <div class="flex items-center mb-2">
                    <span id="lake-region" class="text-blue-200 text-lg">–†–µ–≥–∏–æ–Ω</span>
                    <div class="ml-4 flex items-center">
                        <span class="text-yellow-400">‚≠ê</span>
                        <span id="lake-rating" class="ml-1 font-semibold">0.0</span>
                    </div>
                </div>
                <h1 id="lake-name" class="text-4xl md:text-5xl font-bold mb-4">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–∑–µ—Ä–∞</h1>
                <p id="lake-description" class="text-xl text-blue-100 max-w-3xl">–û–ø–∏—Å–∞–Ω–∏–µ –æ–∑–µ—Ä–∞</p>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="py-12">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Main Info -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Fish Species -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">üêü –û–±–∏—Ç–∞—é—â–∏–µ –≤–∏–¥—ã —Ä—ã–±</h2>
                        <div id="fish-species" class="grid md:grid-cols-2 gap-4">
                            <!-- Fish species will be loaded here -->
                        </div>
                    </div>

                    <!-- Best Season -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">üìÖ –õ—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Ä—ã–±–∞–ª–∫–∏</h2>
                        <div id="best-season" class="flex flex-wrap gap-2">
                            <!-- Best season will be loaded here -->
                        </div>
                    </div>

                    <!-- Infrastructure -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">üèóÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞</h2>
                        <div id="infrastructure" class="grid md:grid-cols-2 gap-4">
                            <!-- Infrastructure will be loaded here -->
                        </div>
                    </div>

                    <!-- Map -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h2>
                        <div class="bg-slate-200 rounded-lg h-64 flex items-center justify-center">
                            <div class="text-center">
                                <div class="text-4xl mb-2">üó∫Ô∏è</div>
                                <p class="text-slate-600">–ö–∞—Ä—Ç–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞</p>
                                <button onclick="openYandexMap()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                                    –û—Ç–∫—Ä—ã—Ç—å –≤ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞—Ö
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-8">
                    <!-- Weather Forecast -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">üå§Ô∏è –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã</h2>
                        <div id="weather-forecast" class="space-y-4">
                            <!-- Weather will be loaded here -->
                        </div>
                    </div>

                    <!-- Bite Forecast -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">üé£ –ü—Ä–æ–≥–Ω–æ–∑ –∫–ª–µ–≤–∞</h2>
                        <div id="bite-forecast" class="space-y-4">
                            <!-- Bite forecast will be loaded here -->
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="space-y-4">
                        <button onclick="buildRoute()" class="w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold text-lg transition-colors">
                            üìç –ü—Ä–æ–ª–æ–∂–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
                        </button>
                        <button onclick="shareLake()" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold text-lg transition-colors">
                            üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                        </button>
                        <button onclick="addToFavorites()" class="w-full bg-slate-600 hover:bg-slate-700 text-white px-6 py-3 rounded-lg font-semibold text-lg transition-colors">
                            ‚ù§Ô∏è –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
                        </button>
                    </div>

                    <!-- Quick Calculator -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-slate-800 mb-4">–ë—ã—Å—Ç—Ä—ã–π –ø–æ–¥–±–æ—Ä —Å–Ω–∞—Å—Ç–µ–π</h3>
                        <div class="space-y-3">
                            <select id="quick-fish" class="w-full border border-slate-300 rounded-lg px-3 py-2 text-sm">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä—ã–±—É</option>
                            </select>
                            <button onclick="quickTackleRecommend()" class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                                –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-800 text-white py-12">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="text-2xl">üêü</div>
                        <span class="text-xl font-bold text-gradient">FishGuide</span>
                    </div>
                    <p class="text-slate-400">–ü—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ —Ä—ã–±–æ–ª–æ–≤–Ω—ã–º –æ–∑–µ—Ä–∞–º –†–æ—Å—Å–∏–∏</p>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
                    <ul class="space-y-2 text-slate-400">
                        <li><a href="index.html" class="hover:text-white transition-colors">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="lakes.html" class="hover:text-white transition-colors">–ö–∞—Ç–∞–ª–æ–≥ –æ–∑–µ—Ä</a></li>
                        <li><a href="tackle-calculator.html" class="hover:text-white transition-colors">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–Ω–∞—Å—Ç–µ–π</a></li>
                        <li><a href="fish-guide.html" class="hover:text-white transition-colors">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä—ã–±</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã</h3>
                    <ul class="space-y-2 text-slate-400">
                        <li><a href="lakes.html?region=–¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å" class="hover:text-white transition-colors">–¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</a></li>
                        <li><a href="lakes.html?region=–ö–∞—Ä–µ–ª–∏—è" class="hover:text-white transition-colors">–ö–∞—Ä–µ–ª–∏—è</a></li>
                        <li><a href="lakes.html?region=–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å" class="hover:text-white transition-colors">–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-slate-700 mt-8 pt-8 text-center text-slate-400">
                <p>&copy; 2024 FishGuide. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        // Lake detail page functionality
        let currentLake = null;
        const API_KEY = 'd192e284d050cbe679c3641f372e7a02';

        // Initialize lake detail page
        async function initializeLakeDetailPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const lakeId = parseInt(urlParams.get('id'));
            
            if (!lakeId) {
                window.location.href = 'lakes.html';
                return;
            }

            // Find lake data
            const lakesData = window.FishGuide?.lakesData || [];
            currentLake = lakesData.find(lake => lake.id === lakeId);
            
            if (!currentLake) {
                window.location.href = 'lakes.html';
                return;
            }

            // Load lake information
            loadLakeInfo();
            
            // Load weather forecast
            await loadWeatherForecast();
            
            // Load fish options for quick calculator
            loadFishOptions();
            
            // Hide loading
            document.getElementById('loading-state').style.display = 'none';
        }

        // Load lake information
        function loadLakeInfo() {
            document.getElementById('lake-name').textContent = currentLake.name;
            document.getElementById('lake-region').textContent = currentLake.region;
            document.getElementById('lake-rating').textContent = currentLake.rating;
            document.getElementById('lake-description').textContent = currentLake.description;

            // Load fish species
            const fishContainer = document.getElementById('fish-species');
            fishContainer.innerHTML = currentLake.fish_species.map(fish => `
                <div class="flex items-center space-x-3 p-3 bg-slate-50 rounded-lg">
                    <div class="text-2xl">üêü</div>
                    <div>
                        <div class="font-medium">${fish}</div>
                        <div class="text-sm text-slate-600">–í–æ–¥–∏—Ç—Å—è –≤ –æ–∑–µ—Ä–µ</div>
                    </div>
                </div>
            `).join('');

            // Load best season
            const seasonContainer = document.getElementById('best-season');
            seasonContainer.innerHTML = currentLake.best_season.map(season => `
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">
                    ${season}
                </span>
            `).join('');

            // Load infrastructure
            const infraContainer = document.getElementById('infrastructure');
            infraContainer.innerHTML = currentLake.infrastructure.map(item => `
                <div class="flex items-center space-x-3 p-3 bg-slate-50 rounded-lg">
                    <div class="text-xl">üèóÔ∏è</div>
                    <span class="font-medium">${item}</span>
                </div>
            `).join('');
        }

        // Load weather forecast
        async function loadWeatherForecast() {
            try {
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/forecast?lat=${currentLake.coordinates.lat}&lon=${currentLake.coordinates.lon}&appid=${API_KEY}&units=metric&lang=ru`
                );
                
                if (!response.ok) {
                    throw new Error('Weather API error');
                }
                
                const data = await response.json();
                displayWeatherForecast(data);
                calculateBiteForecast(data);
            } catch (error) {
                console.error('Error loading weather:', error);
                displayWeatherError();
            }
        }

        // Display weather forecast
        function displayWeatherForecast(data) {
            const weatherContainer = document.getElementById('weather-forecast');
            
            // Get 3-day forecast (one forecast per day)
            const dailyForecasts = [];
            const today = new Date().toDateString();
            
            for (let i = 0; i < data.list.length && dailyForecasts.length < 3; i++) {
                const forecast = data.list[i];
                const forecastDate = new Date(forecast.dt * 1000).toDateString();
                
                if (forecastDate !== today && !dailyForecasts.find(f => 
                    new Date(f.dt * 1000).toDateString() === forecastDate
                )) {
                    dailyForecasts.push(forecast);
                }
            }

            weatherContainer.innerHTML = dailyForecasts.map(forecast => {
                const date = new Date(forecast.dt * 1000);
                const weather = forecast.weather[0];
                const temp = Math.round(forecast.main.temp);
                const windSpeed = forecast.wind.speed;
                const pressure = forecast.main.pressure;
                const humidity = forecast.main.humidity;

                return `
                    <div class="weather-card bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <div class="font-semibold">${date.toLocaleDateString('ru-RU', { weekday: 'long', day: 'numeric', month: 'short' })}</div>
                            <div class="text-2xl">${getWeatherIcon(weather.main)}</div>
                        </div>
                        <div class="text-sm text-slate-600 mb-2">${weather.description}</div>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div>üå°Ô∏è ${temp}¬∞C</div>
                            <div>üí® ${windSpeed} –º/—Å</div>
                            <div>üìä ${pressure} –≥–ü–∞</div>
                            <div>üíß ${humidity}%</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Calculate bite forecast
        function calculateBiteForecast(data) {
            const biteContainer = document.getElementById('bite-forecast');
            const dailyForecasts = [];
            const today = new Date().toDateString();
            
            for (let i = 0; i < data.list.length && dailyForecasts.length < 3; i++) {
                const forecast = data.list[i];
                const forecastDate = new Date(forecast.dt * 1000).toDateString();
                
                if (forecastDate !== today && !dailyForecasts.find(f => 
                    new Date(f.dt * 1000).toDateString() === forecastDate
                )) {
                    dailyForecasts.push(forecast);
                }
            }

            biteContainer.innerHTML = dailyForecasts.map(forecast => {
                const date = new Date(forecast.dt * 1000);
                const biteRating = calculateBiteRating(forecast);
                const biteClass = biteRating >= 7 ? 'bite-excellent' : biteRating >= 4 ? 'bite-good' : 'bite-poor';
                const biteText = biteRating >= 7 ? '–û—Ç–ª–∏—á–Ω—ã–π' : biteRating >= 4 ? '–•–æ—Ä–æ—à–∏–π' : '–ü–ª–æ—Ö–æ–π';

                return `
                    <div class="weather-card ${biteClass} text-white p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <div class="font-semibold">${date.toLocaleDateString('ru-RU', { weekday: 'long', day: 'numeric', month: 'short' })}</div>
                            <div class="text-2xl">${biteRating >= 7 ? 'üé£' : biteRating >= 4 ? 'üêü' : 'üò¥'}</div>
                        </div>
                        <div class="text-lg font-bold mb-1">${biteText}</div>
                        <div class="text-sm opacity-90">
                            ${getBiteDescription(biteRating, forecast)}
                        </div>
                        <div class="mt-2">
                            <div class="w-full bg-white/20 rounded-full h-2">
                                <div class="bg-white h-2 rounded-full" style="width: ${biteRating * 10}%"></div>
                            </div>
                            <div class="text-xs mt-1">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${biteRating}/10</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Calculate bite rating based on weather conditions
        function calculateBiteRating(forecast) {
            let rating = 5; // Base rating
            
            // Temperature factor
            const temp = forecast.main.temp;
            if (temp >= 15 && temp <= 25) rating += 2;
            else if (temp >= 10 && temp <= 30) rating += 1;
            else if (temp < 5 || temp > 35) rating -= 2;
            
            // Pressure factor
            const pressure = forecast.main.pressure;
            if (pressure >= 1015 && pressure <= 1025) rating += 1;
            else if (pressure < 1000 || pressure > 1035) rating -= 1;
            
            // Wind factor
            const windSpeed = forecast.wind.speed;
            if (windSpeed >= 2 && windSpeed <= 5) rating += 1;
            else if (windSpeed > 8) rating -= 1;
            
            // Weather condition factor
            const weather = forecast.weather[0].main;
            if (weather === 'Clear' || weather === 'Clouds') rating += 1;
            else if (weather === 'Rain' || weather === 'Snow') rating -= 2;
            
            return Math.max(1, Math.min(10, Math.round(rating)));
        }

        // Get weather icon
        function getWeatherIcon(weather) {
            const icons = {
                'Clear': '‚òÄÔ∏è',
                'Clouds': '‚òÅÔ∏è',
                'Rain': 'üåßÔ∏è',
                'Snow': '‚ùÑÔ∏è',
                'Thunderstorm': '‚õàÔ∏è',
                'Drizzle': 'üå¶Ô∏è',
                'Mist': 'üå´Ô∏è'
            };
            return icons[weather] || 'üå°Ô∏è';
        }

        // Get bite description
        function getBiteDescription(rating, forecast) {
            if (rating >= 7) {
                return '–û—Ç–ª–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Ä—ã–±–∞–ª–∫–∏. –†—ã–±–∞ –∞–∫—Ç–∏–≤–Ω–∞.';
            } else if (rating >= 4) {
                return '–•–æ—Ä–æ—à–∏–µ —É—Å–ª–æ–≤–∏—è. –†—ã–±–∞ –∫–ª—é–µ—Ç —É–º–µ—Ä–µ–Ω–Ω–æ.';
            } else {
                return '–ü–ª–æ—Ö–∏–µ —É—Å–ª–æ–≤–∏—è. –†—ã–±–∞ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–∞.';
            }
        }

        // Display weather error
        function displayWeatherError() {
            const weatherContainer = document.getElementById('weather-forecast');
            weatherContainer.innerHTML = `
                <div class="text-center py-8 text-slate-600">
                    <div class="text-4xl mb-2">üå§Ô∏è</div>
                    <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã</p>
                    <button onclick="loadWeatherForecast()" class="mt-2 text-blue-600 hover:text-blue-800">
                        –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                    </button>
                </div>
            `;
        }

        // Load fish options for quick calculator
        function loadFishOptions() {
            const select = document.getElementById('quick-fish');
            const fishOptions = currentLake.fish_species;
            
            select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä—ã–±—É</option>' +
                fishOptions.map(fish => `<option value="${fish}">${fish}</option>`).join('');
        }

        // Quick tackle recommendation
        function quickTackleRecommend() {
            const selectedFish = document.getElementById('quick-fish').value;
            if (!selectedFish) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä—ã–±—É');
                return;
            }

            // Simple recommendation based on fish type
            const recommendations = {
                '–©—É–∫–∞': '–°–ø–∏–Ω–Ω–∏–Ω–≥ —Å—Ä–µ–¥–Ω–µ–≥–æ –∫–ª–∞—Å—Å–∞, –ø–ª–µ—Ç–µ–Ω–∞—è –ª–µ—Å–∫–∞ 0.20–º–º, –∫—Ä—É–ø–Ω—ã–µ –≤–æ–±–ª–µ—Ä—ã',
                '–û–∫—É–Ω—å': '–õ–µ–≥–∫–∏–π —Å–ø–∏–Ω–Ω–∏–Ω–≥, –ª–µ—Å–∫–∞ 0.15–º–º, –º–µ–ª–∫–∏–µ –±–ª–µ—Å–Ω—ã –∏ –≤–æ–±–ª–µ—Ä—ã',
                '–õ–µ—â': '–§–∏–¥–µ—Ä, –ª–µ—Å–∫–∞ 0.25–º–º, –∫—Ä—é—á–∫–∏ ‚Ññ8-10, –ø—Ä–∏–∫–æ—Ä–º–∫–∞ —Å –æ–ø–∞—Ä—ã—à–µ–º',
                '–°—É–¥–∞–∫': '–°–ø–∏–Ω–Ω–∏–Ω–≥, –ø–ª–µ—Ç–µ–Ω–∞—è –ª–µ—Å–∫–∞ 0.18–º–º, –¥–∂–∏–≥–æ–≤—ã–µ –ø—Ä–∏–º–∞–Ω–∫–∏',
                '–Ø–∑—å': '–ü–æ–ø–ª–∞–≤–æ—á–Ω–∞—è —É–¥–æ—á–∫–∞, –ª–µ—Å–∫–∞ 0.20–º–º, —á–µ—Ä–≤—å –∏ –æ–ø–∞—Ä—ã—à',
                '–ü–ª–æ—Ç–≤–∞': '–õ–µ–≥–∫–∞—è —É–¥–æ—á–∫–∞, –ª–µ—Å–∫–∞ 0.12–º–º, –º–µ–ª–∫–∏–µ –∫—Ä—é—á–∫–∏, –º–æ—Ç—ã–ª—å'
            };

            const recommendation = recommendations[selectedFish] || '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä —Å–Ω–∞—Å—Ç–µ–π –¥–ª—è —ç—Ç–æ–π —Ä—ã–±—ã';
            
            alert(`–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ª–æ–≤–ª–∏ ${selectedFish}:\n\n${recommendation}\n\n–î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–Ω–∞—Å—Ç–µ–π.`);
        }

        // Navigation functions
        function buildRoute() {
            const url = `yandexnavi://build_route_on_map?lat=${currentLake.coordinates.lat}&lon=${currentLake.coordinates.lon}`;
            window.location.href = url;
        }

        function openYandexMap() {
            const url = `https://yandex.ru/maps/?ll=${currentLake.coordinates.lon},${currentLake.coordinates.lat}&z=12`;
            window.open(url, '_blank');
        }

        function shareLake() {
            if (navigator.share) {
                navigator.share({
                    title: currentLake.name,
                    text: currentLake.description,
                    url: window.location.href
                });
            } else {
                // Fallback - copy to clipboard
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
                });
            }
        }

        function addToFavorites() {
            // Simple localStorage implementation
            let favorites = JSON.parse(localStorage.getItem('fishguide-favorites') || '[]');
            if (!favorites.includes(currentLake.id)) {
                favorites.push(currentLake.id);
                localStorage.setItem('fishguide-favorites', JSON.stringify(favorites));
                alert('–û–∑–µ—Ä–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ');
            } else {
                alert('–û–∑–µ—Ä–æ —É–∂–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º');
            }
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for main.js to load
            setTimeout(initializeLakeDetailPage, 100);
        });
    </script>
</body>
</html>